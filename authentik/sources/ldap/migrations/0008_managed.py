# Generated by Django 3.1.6 on 2021-02-02 20:51

from django.apps.registry import Apps
from django.db import migrations


def set_managed_flag(apps: Apps, schema_editor):
    LDAPPropertyMapping = apps.get_model(
        "authentik_sources_ldap", "LDAPPropertyMapping"
    )
    db_alias = schema_editor.connection.alias
    for mapping in LDAPPropertyMapping.objects.using(db_alias).filter(
        name__startswith="Autogenerated "
    ):
        mapping.managed = True
        mapping.save()


class Migration(migrations.Migration):

    dependencies = [
        ("authentik_sources_ldap", "0007_ldapsource_sync_users_password"),
    ]

    operations = [migrations.RunPython(set_managed_flag)]
