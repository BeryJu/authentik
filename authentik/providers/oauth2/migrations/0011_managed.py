# Generated by Django 3.1.6 on 2021-02-03 09:24

from django.apps.registry import Apps
from django.db import migrations


def set_managed_flag(apps: Apps, schema_editor):
    ScopeMapping = apps.get_model("authentik_providers_oauth2", "ScopeMapping")
    db_alias = schema_editor.connection.alias
    for mapping in ScopeMapping.objects.using(db_alias).filter(
        name__startswith="Autogenerated "
    ):
        mapping.managed = True
        mapping.save()


class Migration(migrations.Migration):

    dependencies = [
        ("authentik_providers_oauth2", "0010_auto_20201227_1804"),
    ]

    operations = [
        migrations.RunPython(set_managed_flag),
    ]
